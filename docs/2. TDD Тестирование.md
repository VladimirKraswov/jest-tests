# TDD Тестирование

## Общие сведения

**Test-Driven Development (TDD)** — это все еще спорная и не широко применяема техник экстремального программирования. Многие разработчики до сих пор сомневаются в практический пользе TDD. Но есть <a href="https://link.springer.com/article/10.1007/s10664-008-9062-z">исследования</a> таких гигантов как Microsoft и IBM в которых утверждается что количество pre-release bugs в неписаных таким образом четырех продуктов снизилось на 40–90% по сравнению с аналогичными продуктами, в которых практика TDD не использовалась.

**TDD** - Базируется на 3-х шаговом цикле разработки:

* Написание теста (Red):
Разработчик начинает с написания теста, который описывает ожидаемое поведение новой функциональности или изменения в существующей.
Этот тест обычно не проходит, так как соответствующая функциональность еще не реализована.
* Написание кода (Green):
Теперь разработчик начинает писать минимальный объем кода, необходимый для того, чтобы тест прошел успешно. Основная цель - сделать тест зеленым ("Green") как можно быстрее.
* Рефакторинг (Refactor):
После того как тест становится зеленым, разработчик может провести рефакторинг кода, чтобы улучшить его читаемость, эффективность и структуру, при этом обеспечивая, то что тесты остаются успешными.

### Преимущества

* Улучшение качества кода и его надежности.
* Быстрая обратная связь о работоспособности кода.
* Уменьшение количества ошибок, обнаруженных на поздних этапах разработки.
* Улучшение документации, так как тесты служат в качестве спецификации для кода.

### Минусы

* Высокий порог вхождения — начинающим разработчикам будет труднее понять такой подход к разработке.
* Перманентная дисциплина — нельзя писать код раньше тестов.
* Снижение скорости разработки, большие ресурсные инвестиции на старте.
* Основное внимание уделяется модульным тестам, поэтому сами тесты способные управлять дизайном кода

## Пример использования

Давайте подробно опишем пример тестирования с использованием методологии TDD (Test-Driven Development) по шагам. Для этого мы создадим простую функцию для сложения чисел. Мы будем использовать JavaScript и библиотеку для тестирования, такую как Jest. Вот как это делается:

### Шаг 1: Начнем с написания теста

Сначала мы напишем тест, который описывает поведение функции, которую мы планируем создать.

```js
// Файл: math.test.js

// Импортируем библиотеку Jest
const { sum } = require('./math');

// Описываем тест
test('Складывает два числа', () => {
  // Вызываем функцию sum с двумя аргументами и проверяем результат
  expect(sum(1, 2)).toBe(3);
});
```

На этом этапе функция sum еще не существует, но мы уже написали тест для нее. Запустив тест, мы убедимся, что он не проходит (красный) и говорит нам о том, что функция sum не определена.

### Шаг 2: Создаем саму функцию

Теперь мы создадим функцию sum, чтобы сделать тест зеленым (успешным).

```js
// Файл: math.js

// Определяем функцию sum
function sum(a, b) {
  return a + b;
}

// Экспортируем функцию
module.exports = { sum };
```

Теперь наш тест должен пройти успешно (зеленый).

### Шаг 3: Добавляем дополнительные тесты

Мы можем добавить дополнительные тесты, чтобы убедиться в правильности работы функции sum.

```js
// Файл: math.test.js

const { sum } = require('./math');

test('Складывает два положительных числа', () => {
  expect(sum(2, 3)).toBe(5);
});

test('Складывает положительное и отрицательное число', () => {
  expect(sum(5, -2)).toBe(3);
});

test('Складывает отрицательные числа', () => {
  expect(sum(-3, -7)).toBe(-10);
});
```