# Тестирование

## Виды тестирования

### Component/Unit Testing (Компонентное/модульное тестирование)

Этот вид тестирования выполняется на самой ранней стадии разработки программы — во время написания кода. Обычно его выполняет сам программист, который пишет код. Следовательно, ошибки, в большинстве случаев, исправляются сразу же и не попадают к специалистам по тестированию.
Как видно из названия, модульное тестирование направлено на тестирование отдельных модулей и компонентов программы, которые изолированы от других модулей и компонентов. Поэтому его стоит совмещать с другими видами тестирования, сам по себе он малоэффективен.

Определение из книги The Art of Unit Testing:

>Модульный тест - это автоматизированный фрагмент кода, который вызывает единицу работы в системе, а затем проверяет одно предположение о поведении этой единицы работы.
Единица работы (a unit of work) - это единый логический функциональный вариант использования (use case) в системе, который может быть вызван некоторым общедоступным интерфейсом (в большинстве случаев). Единица работы может охватывать один метод, целый класс или несколько классов, работающих вместе для достижения одной логической цели, которую можно проверить.

### Интеграционное тестирование

Интеграционное тестирование необходимо для того ,чтобы тестировать взаимосвязь между чем-либо.
В общем случае различают два вида интеграционного тестирования:
— Компонентное интеграционное тестирование. Как видно из названия, оно необходимо для того, чтобы протестировать работу модулей в связке друг с другом.
Системноеинтеграционное тестирование. Если с предыдущим уровнем тестирования все понятно, то с системным интеграционным тестирование все несколько сложнее. Этот уровень необходим для тестирования систем друг с другом.

### Системное тестирование

Системное тестирование — это тестирование еще более высокого уровня. Напомню, что на компонентном тестировании мы тестируем отдельные модули, а на интеграционном — связь между компонентами. При системном тестировании наша задача уже состоит в том, чтобы убедиться в корректности работы в целом всей системы. Программа в этом случае должна быть максимально приближена к конечному результату. А наше внимание должно быть сосредоточено на общем поведении системы с точки зрения конечных пользователей.

### Приемочное тестирование

Приемочное тестирование — наиболее высокий уровень тестирования. Оно, также как и системное тестирование, необходимо для проверки работы программы в целом.
Этот уровень тестирования используется для подтверждения готовности продукта к сдаче клиенту/публикации и проводится преимущественно в самом конце цикла разработки программы.
Приемочное тестирование можно разделить на:
Пользовательское приемочное - тестирование предназначено для проверки программы, как если бы ее использовал конечный пользователь.
Альфа и Бета тестирование - используется, когда есть необходимость в получении обратной связи от пользователей.

## Методологии разработки ПО на основе тестирование

### TDD - сначала пишем тесты, а потом остальной код

Test Driven Development основывается на повторении коротких циклов разработки: изначально пишется тест, покрывающий желаемое изменение, затем пишется программный код, который реализует желаемое поведение системы и позволит пройти написанный тест. Затем проводится рефакторинг написанного кода с постоянной проверкой прохождения тестов.

### BDD - Тоже что и TDD но тест пишет не разработчик

behaviour-driven development — это разработка, основанная на описании поведения. Определенный человек(или люди) пишет описания вида "я как пользователь хочу когда нажали кнопку пуск тогда показывалось меню как на картинке" (там есть специально выделенные ключевые слова). Программисты давно написали специальные тулы, которые подобные описания переводят в тесты (иногда совсем прозрачно для программиста). А дальше классическая разработка с тестами.

Приимущества:

* Тесты читаемые для не программистов.
* Их легко изменять. Они часто пишутся почти на чистом английском.
* Их может писать product owner или другие заинтересованные лица.
* Результаты выполнения тестов более "человечные".
* Тесты не зависят от целевого языка программирования. Миграция на другой язык сильно упрощается.

Недостатки:

* долго и дорого - требует привлечения специалистов тестирования уже на этапе проработки требований

### DDD - Предметно-ориентированное проектирование

Domain Driven Design - Подход DDD особо полезен в ситуациях, когда разработчик не является специалистом в области разрабатываемого продукта. К примеру: программист не может знать все области, в которых требуется создать ПО, но с помощью правильного представления структуры, посредством предметно-ориентированного подхода, может без труда спроектировать приложение, основываясь на ключевых моментах и знаниях рабочей области.

### FDD - Представляет собой попытку объединить наиболее признанные в индустрии разработки программного обеспечения методики

Features Driven Development - Как и остальные адаптивные методологии, она делает основной упор на коротких итерациях, каждая из которых служит для проработки определенной части функциональности системы. Согласно FDD, одна итерация длится две недели. FDD насчитывает пять процессов. Первые три из них относятся к началу проекта, Последние два шага необходимо делать во время каждой итерации. При этом каждый процесс разбивается на задачи и имеет критерии верификации:

* разработка общей модели;
* составление списка требуемых свойств системы;
* планирование работы над каждым свойством;
* проектирование каждого свойства;
* конструирование каждого свойства.

### MDD - Разработка, управляемая моделями

Model Driven Development - это стиль разработки программного обеспечения, когда модели становятся основными артефактами разработки, из которых генерируется код и другие артефакты.
Если говорить проще, то вся суть разработки сводится к построению необходимых диаграмм, из которых впоследствии мы генерируем рабочий код проекта.
Основная цель MDD — минимизация затрат, связанных с привязкой к конкретным системным платформам и программным инфраструктурам. Ведь основная бизнес-логика содержится в диаграммах и не сковывает нас рамками выбора языка программирования и инструментов разработки.

### PDD - Паническое развитие

Panic Driven Development - Всякий раз, когда в середине спринта появляется новая проблема, она имеет приоритет над любой запланированной работой. Новое всегда лучше и имеет более высокий приоритет.
Cвоеобразный антипаттерн разработки, который, к сожалению, мы все время от времени практикуем.

## Unit тестирование для React

Модульное тестирование, или юнит-тестирование (англ. unit testing) — процесс в программировании, позволяющий проверить на корректность отдельные модули исходного кода программы.

Идея состоит в том, чтобы писать тесты для каждой нетривиальной функции или метода. Это позволяет достаточно быстро проверить, не привело ли очередное изменение кода к регрессии, то есть к появлению ошибок в уже оттестированных местах программы, а также облегчает обнаружение и устранение таких ошибок.
Это первый этап тестирования на котором можно перехватить большенство багов. За ним идут другие виды тестирования такие как интеграционное, системное, приемочное.

Unit-тесты дешевле и быстрее других, их легко автоматизировать.

### Когда Unit тестирование необходимо

* Unit тесты нужны в большинстве проектов включающих сложную логику, часто меняющийся код над которым работает не один разработчик
* Там где нужно быстро протестировать написанный фрагмент кода и сразу понять, где именно кроется ошибка.

### Когда Unit тестирование делать не нужно

* Вы делаете простой сайт-визитку, быстрее просто все проверить «руками»
* Вы занимаетесь рекламным сайтом/простыми или баннерами – сложная верстка/анимация или большой объем статики. Никакой логики нет, только представление
* Вы делаете проект для выставки. Софт будет работать 1-2 дня на выставке
* Проект сильно ограничен по срокам. Срок – от двух недель до месяца

### Фреймворки и библиотеки для UNIT тестирования

В основном все библиотеки и инструменты для UNIT тестирования можно разделить на три основные категории:

* **Test Runner** – утилита, которая берет файлы с нашими тестами, запускает их и выводит результаты тестирования. Наиболее популярные утилиты в этой области – **JEST**, **Mocha**, **Ava** и **Karma**. Большенство из них включают в себя и другие инструменты **Assertion library**, **Mock library**
* **Assertion library** – библиотеки с набором функций для проверки условий ваших тестов. **Chai** и **Expect** – наиболее используемые библиотеки из данной области.
* **Mock library** – библиотека, используемая для создания «заглушек» (mock) при тестировании. Утилита позволяет заменять связанные части тестируемого компонента «заглушками», имитирующими нужное поведение. Здесь наиболее популярный выбор – **Sinon**.

Чуть подробнее:

* **Jest** - очень простая в использовании библиотека тестирования. Он не требует дополнительных настроек, легкий в понимании и применении, а так же имеет довольно хорошую документацию. Отлично подходит для проектов использующих Node, React, Angular, Vue, Babel, TypeScript и не только. Также он имеет открытый исходный код и поддерживается компанией Facebook.
* **Mocha** — это популярный мощный тестовый фреймворк JavaScript, используемый для организации и запуска тестовых файлов.
* **Ava** - Инновационная мощная  библиотека тестирования. В первую очередь библиотека предлагает скорость. Тесты запускаются параллельно, что дает ускорение выполнения тестов.
* **Enzyme** — это утилита тестирования JavaScript для React, которая упрощает утверждение, манипулирование и просмотр выходных данных ваших компонентов React. Он был разработан в Airbnb, а затем передан в независимую организацию. На данный момент считается мертвым, так как с выходом React 18 требует полной переработки, хорошей альтернативой будет RTL (React Test Library)
* **React Test Library** - это набор вспомогательных функций, позволяющий тестировать React-компоненты не полагаясь на их внутреннюю реализацию. Такой подход упрощает рефакторинг, а также подталкивает вас применять лучшие практики по улучшению доступности. Библиотека идет в комплекте с React
* **Chai** – библиотека, предоставляющая множество функций проверки утверждений. Наподобие assert.equal
* **Sinon** – библиотека, позволяющая наблюдать за функциями, эмулировать встроенные функции и многое другое

### Другие инструменты тестирования

* Cypress - Пригодится если в проекте много юнит-тестирования, интеграционного и E2E-тестирования.
* Selenium -  Подойдет если необходимо протестировать только интерфейс и базовые функции.